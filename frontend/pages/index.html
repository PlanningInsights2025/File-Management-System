<input type="email" id="email" placeholder="Email">
<input type="password" id="password" placeholder="Password">
<button onclick="login()">Login</button>
<a href="reset.html">Forgot Password?</a>

<script type="module">
  import { auth, db } from "./js/firebase.js";
  import { signInWithEmailAndPassword } from 
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-auth.js";
  import { doc, getDoc } from 
    "https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore.js";

  window.login = async () => {
    try {
      const userCred = await signInWithEmailAndPassword(
        auth, email.value, password.value
      );

      const docSnap = await getDoc(doc(db, "users", userCred.user.uid));
      const role = docSnap.data().role;

      if (role === "admin") {
        window.location.href = "admin.html";
      } else {
        window.location.href = "dashboard.html";
      }
    } catch {
      alert("Login Failed");
    }
  };
</script>
